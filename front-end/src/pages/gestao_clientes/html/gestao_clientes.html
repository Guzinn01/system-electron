<div class="container">

    <div id="container-de-notificacoes"></div>

    <div id="view-tabela-clientes">

        <h1>Gestão de Clientes</h1>
        <div class="header-actions">
            <button id="btn-novo-cliente" class="btn-acao-primaria">
                <i class="fas fa-plus"></i> Cadastrar Novo Cliente
            </button>
        </div>
        <div class="search-bar-container">
            <i class="fas fa-search"></i>
            <input type="search" id="input-busca-cliente" placeholder="Buscar por nome, CPF/CNPJ ou e-mail..."
                autocomplete="off">

            <div id="container-resultados-busca" class="hidden"></div>
        </div>
        <div class="tab-nav">
            <button id="tab-pf" class="tab-button active">Pessoas Físicas</button>
            <button id="tab-pj" class="tab-button">Pessoas Jurídicas</button>
        </div>
        <div class="tab-content">
            <div id="content-pf" class="tab-pane active">
                <table>
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>CPF</th>
                            <th>Telefone</th>
                            <th>Status Cliente</th>
                            <th>Nº Consórcios</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="corpo-tabela-pf">
                    </tbody>
                </table>
            </div>
            <div id="content-pj" class="tab-pane">
                <table>
                    <thead>
                        <tr>
                            <th>Razão Social</th>
                            <th>CNPJ</th>
                            <th>Telefone</th>
                            <th>Status Cliente</th>
                            <th>Nº Consórcios</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="corpo-tabela-pj">
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    <div id="view-cadastro-cliente" class="hidden">

        <div class="header-form">
            <h1 id="form-title">Cadastro de Novo Cliente</h1>
            <button id="btn-voltar-tabela-do-form" class="btn-acao-secundaria">Voltar para a Lista</button>
        </div>
        <form id="form-cadastro-cliente" class="card">
            <h3><i class="fas fa-user-circle"></i> Identificação</h3>
            <div class="form-section">
                <div class="form-group">
                    <label>Tipo de Pessoa</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="tipoPessoaFisica" name="tipo_pessoa" value="Fisica" checked>
                            <label for="tipoPessoaFisica" class="radio-label">Pessoa Física</label>
                        </div>

                        <div class="radio-item">
                            <input type="radio" id="tipoPessoaJuridica" name="tipo_pessoa" value="Juridica">
                            <label for="tipoPessoaJuridica" class="radio-label">Pessoa Jurídica</label>
                        </div>
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group span-2">
                        <label for="nome_completo" id="label-nome">Nome Completo</label>
                        <input type="text" id="nome_completo" name="nome_completo" required>
                    </div>
                    <div class="form-group">
                        <label for="cpf_cnpj" id="label-cpf-cnpj">CPF</label>
                        <input type="text" id="cpf_cnpj" name="cpf_cnpj" required>
                    </div>
                </div>
            </div>
            <h3><i class="fas fa-address-book"></i> Informações Pessoais & Contato</h3>
            <div class="form-section">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="data_nascimento" id="label-data-nascimento">Data de Nascimento</label>
                        <input type="text" id="data_nascimento" name="data_nascimento" placeholder="DD/MM/AAAA">
                    </div>
                    <div class="form-group">
                        <label for="profissao">Profissão</label>
                        <input type="text" id="profissao" name="profissao">
                    </div>
                    <div class="form-group">
                        <label for="estado_civil">Estado Civil</label>
                        <select id="estado_civil" name="estado_civil">
                            <option value="Solteiro(a)">Solteiro(a)</option>
                            <option value="Casado(a)">Casado(a)</option>
                            <option value="Divorciado(a)">Divorciado(a)</option>
                            <option value="Viuvo(a)">Viúvo(a)</option>
                        </select>
                    </div>
                    <div class="form-group span-2">
                        <label for="email">E-mail</label>
                        <input type="email" id="email" name="email">
                    </div>
                    <div class="form-group">
                        <label for="telefone">Telefone / Celular</label>
                        <input type="tel" id="telefone" name="telefone">
                    </div>
                </div>
            </div>
            <h3><i class="fas fa-map-marker-alt"></i> Endereço</h3>
            <div class="form-section">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="cep">CEP</label>
                        <input type="text" id="cep" name="cep">
                    </div>

                    <div class="form-group span-2">
                        <label for="rua">Rua / Logradouro</label>
                        <input type="text" id="rua" name="rua">
                    </div>

                    <div class="form-group">
                        <label for="numero">Número</label>
                        <input type="text" id="numero" name="numero">
                    </div>

                    <div class="form-group">
                        <label for="bairro">Bairro</label>
                        <input type="text" id="bairro" name="bairro">
                    </div>
                </div>
            </div>
            <div id="secao-socios" class="hidden">
                <h3><i class="fas fa-building"></i> Sócios da Empresa</h3>

                <div id="lista-socios-container">
                </div>

                <button type="button" id="btn-adicionar-socio" class="btn-acao-adicionar">
                    <i class="fas fa-plus"></i> Adicionar Sócio
                </button>
            </div>
            <div id="secao-conjuge" class="hidden">
                <h3><i class="fas fa-heart"></i> Dados do Cônjuge</h3>
                <div class="form-section">
                    <div class="form-grid">
                        <div class="form-group span-2">
                            <label for="conjuge_nome_completo">Nome Completo do Cônjuge</label>
                            <input type="text" id="conjuge_nome_completo" name="conjuge_nome_completo">
                        </div>
                        <div class="form-group">
                            <label for="conjuge_cpf">CPF do Cônjuge</label>
                            <input type="text" id="conjuge_cpf" name="conjuge_cpf">
                        </div>
                        <div class="form-group">
                            <label for="conjuge_data_nascimento">Data de Nascimento</label>
                            <input type="text" id="conjuge_data_nascimento" name="conjuge_data_nascimento"
                                placeholder="DD/MM/AAAA">
                        </div>
                        <div class="form-group">
                            <label for="conjuge_email">E-mail do Cônjuge</label>
                            <input type="email" id="conjuge_email" name="conjuge_email">
                        </div>
                        <div class="form-group">
                            <label for="conjuge_telefone">Telefone do Cônjuge</label>
                            <input type="tel" id="conjuge_telefone" name="conjuge_telefone">
                        </div>
                    </div>
                </div>
            </div>
            <div class="button-container">
                <button type="submit" class="btn-acao-salvar">Salvar Cliente</button>
            </div>
        </form>
    </div>

    <div id="view-perfil-cliente" class="hidden">
        <div class="header-form">
            <h1 id="perfil-nome-cliente">Perfil do Cliente</h1>
            <button id="btn-voltar-do-perfil" class="btn-acao-secundaria">
                <i class="fas fa-arrow-left"></i> Voltar para a Lista
            </button>
        </div>
        <div class="perfil-layout">
            <div class="perfil-coluna-detalhes card">
                <div id="perfil-dados-container"></div>

                <div class="form-section" style="padding-top: 15px; margin-top: 15px; border-top: 1px solid #eee;">
                    <div class="form-group">
                        <label for="select-status-cliente" style="font-size: 1.1em;">Status do Cliente</label>
                        <select id="select-status-cliente" name="status_cliente">
                            <option value="Ativo">Ativo</option>
                            <option value="Inativo">Inativo</option>
                            <option value="Cancelado">Cancelado</option>
                        </select>
                    </div>
                </div>
                <div class="actions-group-profile">
                </div>
                <div class="actions-group-profile">
                    <button id="btn-editar-cliente-do-perfil" class="btn-acao-primaria">
                        <i class="fas fa-edit"></i> Editar Dados
                    </button>
                    <button id="btn-excluir-cliente-perfil" class="btn-acao-perigo">
                        <i class="fas fa-trash"></i> Excluir Cliente
                    </button>
                </div>
            </div>
            <div class="perfil-coluna-consorcios">
                <h3><i class="fas fa-file-invoice-dollar"></i> Consórcios Contratados</h3>

                <div id="consortium-summary-container" class="summary-grid">
                </div>

                <div id="perfil-consortium-cards-container">
                </div>

                <div class="add-new-item-bar">
                    <button type="button" id="btn-add-consortium-do-perfil" class="btn-acao-adicionar">
                        <i class="fas fa-plus"></i> Adicionar Novo Consórcio
                    </button>
                </div>
            </div>


        </div>
    </div>
</div>

<div class="modal-backdrop hidden" id="consortium-modal-backdrop">
    <div class="modal" id="consortium-modal">
        <div class="modal-header">
            <h3 id="consortium-modal-title">Adicionar Novo Consórcio</h3>
            <button class="close-button" id="consortium-modal-close-button">&times;</button>
        </div>
        <form id="form-add-consortium">
            <div class="modal-body">
                <div class="form-grid-modal">
                    <!-- Campos Originais -->
                    <div class="form-group">
                        <label for="consortium-administradora">Administradora</label>
                        <select id="consortium-administradora" name="administradora" required>
                            <option value="" disabled selected>Selecione...</option>
                            <option value="Porto">Porto</option>
                            <option value="Yamaha">Yamaha</option>
                            <option value="Itaú">Itaú</option>
                            <option value="Roma">Roma</option>
                            <option value="Santander">Santander</option>
                            <option value="Embracon">Embracon</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="consortium-status">Status</label>
                        <select id="consortium-status" name="status" required>
                            <option value="ativa">Ativa</option>
                            <option value="contemplada">Contemplada</option>
                            <option value="cancelada">Cancelada</option>
                            <option value="transferida">Transferida</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="consortium-credito">Valor do Crédito (R$)</label>
                        <input type="text" id="consortium-credito" name="creditoContratado" placeholder="Ex: 100.000,00"
                            required>
                    </div>
                    <div class="form-group">
                        <label for="consortium-meses">Quantidade de Meses</label>
                        <input type="number" id="consortium-meses" name="duracaoMeses" placeholder="Ex: 80" required>
                    </div>
                    <div class="form-group">
                        <label for="consortium-grupo">Grupo</label>
                        <input type="text" id="consortium-grupo" name="grupo" required>
                    </div>
                    <div class="form-group">
                        <label for="consortium-cota">Cota</label>
                        <input type="text" id="consortium-cota" name="cota" required>
                    </div>
                    <div class="form-group">
                        <label for="consortium-data-inicio">Data de Início (Venda)</label>
                        <input type="text" id="consortium-data-inicio" name="dataInicio" required>
                    </div>
                    <div class="form-group">
                        <label for="consortium-vendedor">Vendido por</label>
                        <select id="consortium-vendedor" name="vendedorId">
                            <option value="" disabled selected>Carregando...</option>
                        </select>
                    </div>

                    <div class="form-group span-2">
                        <label for="consortium-numero-contrato">Número do Contrato</label>
                        <input type="text" id="consortium-numero-contrato" name="numeroContrato">
                    </div>

                    <div class="form-group span-2">
                        <label>Contrato (PDF)</label>
                        <div class="custom-file-upload">
                            <input type="file" id="consortium-contrato-pdf" name="contratoPDF" accept=".pdf">
                            <label for="consortium-contrato-pdf" class="btn-upload">
                                <i class="fas fa-upload"></i>
                                <span>Escolher arquivo...</span>
                            </label>
                        </div>
                        <div id="info-contrato-antigo"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-acao-secundaria" id="consortium-modal-cancel-button">Cancelar</button>
                <button type="submit" class="btn-acao-primaria">Salvar Consórcio</button>
            </div>
        </form>
    </div>
</div>
<div class="modal-backdrop" id="transfer-history-modal-backdrop">
    <div class="modal" id="transfer-history-modal">
        <div class="modal-header">
            <h3>Histórico de Transferências</h3>
            <button class="close-button" id="transfer-history-modal-close-button">&times;</button>
        </div>
        <div class="modal-body" id="transfer-history-modal-body">
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-acao-secundaria" id="transfer-history-modal-cancel-button">Fechar</button>
        </div>
    </div>
</div>

<div class="modal-backdrop hidden" id="confirm-delete-modal-backdrop">
    <div class="modal" id="confirm-delete-modal">
        <div class="modal-header">
            <h3>Confirmar Exclusão</h3>
        </div>
        <div class="modal-body">
            <p id="confirm-delete-message">Tem certeza? Esta ação não pode ser desfeita.</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-acao-secundaria" id="btn-cancel-delete">Cancelar</button>
            <button type="button" class="btn-acao-perigo" id="btn-confirm-delete">Sim, Excluir</button>
        </div>
    </div>
</div>

<div class="modal-backdrop hidden" id="transfer-modal-backdrop">
    <div class="modal" id="transfer-modal">
        <div class="modal-header">
            <h3 id="transfer-modal-title">Transferir Consórcio</h3>
            <button class="close-button" id="transfer-modal-close-button">&times;</button>
        </div>
        <form id="form-transfer-consortium">
            <div class="modal-body">
                <p>Você está transferindo o consórcio <strong id="transfer-consortium-info">...</strong></p>

                <div class="form-group">
                    <label for="transfer-client-search">Buscar novo titular:</label>
                    <input type="search" id="transfer-client-search" placeholder="Digite para buscar um cliente...">
                </div>

                <div id="info-cliente-selecionado-transferencia" class="info-selecao"></div>
                <div class="form-group">
                    <label for="transfer-client-list">Selecione o novo titular na lista:</label>
                    <div id="transfer-client-list" class="client-list-container">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-acao-secundaria" id="transfer-modal-cancel-button">Cancelar</button>
                <button type="submit" class="btn-acao-primaria">Confirmar Transferência</button>
            </div>
        </form>
    </div>
</div>
<div class="modal-backdrop hidden" id="pdf-viewer-modal-backdrop">
    <div class="modal modal-pdf-viewer" id="pdf-viewer-modal">
        <div class="modal-header">
            <h3 id="pdf-viewer-modal-title">Visualizador de Contrato</h3>
            <button class="close-button" id="pdf-viewer-modal-close-button">&times;</button>
        </div>
        <div class="modal-body" id="pdf-viewer-modal-body">
            <object id="pdf-viewer-object" data="" type="application/pdf" width="100%" height="100%">
                <p>Parece que você não tem um visualizador de PDF no seu navegador. Você pode <a
                        id="pdf-fallback-download-link" href="#">clicar aqui para baixar o arquivo PDF</a>.</p>
            </object>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-acao-primaria" id="pdf-viewer-download-button">
                <i class="fas fa-download"></i> Baixar PDF
            </button>
        </div>
    </div>
</div>
</div>